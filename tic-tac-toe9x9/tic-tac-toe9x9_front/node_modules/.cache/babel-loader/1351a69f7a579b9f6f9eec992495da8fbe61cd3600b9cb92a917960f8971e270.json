{"ast":null,"code":"var _jsxFileName = \"/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Comments.jsx\";\nimport { Component } from \"react\";\nimport { AppContext } from \"../App/Context\";\nimport \"./Comments.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class Comment extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Error: \"\",\n      ShowDeleteWarning: false,\n      CommentToDelete: null\n    };\n    this.DeleteComment = async id => {\n      try {\n        const response = await fetch(`http://localhost:9091/deleteCommentById?comment_id=${id}`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${this.context.UserToken}`\n          }\n        });\n        const result = await response.json();\n        if (result.error !== \"\") {\n          this.setState({\n            Error: result.error\n          });\n        } else {\n          this.setState({});\n        }\n        console.log(\"Ответ от API: \", result);\n      } catch (error) {\n        console.error(\"Ошибка: \", error);\n      }\n    };\n    this.showDeleteWarning = id => {\n      this.setState({\n        ShowDeleteWarning: true,\n        CommentToDelete: id\n      });\n    };\n    this.confirmDeleteComment = async () => {\n      const {\n        CommentToDelete\n      } = this.state;\n      await this.DeleteComment(CommentToDelete);\n      this.setState({\n        ShowDeleteWarning: false,\n        CommentToDelete: null\n      });\n      if (this.props.onUpdate) {\n        this.props.onUpdate();\n      }\n    };\n    this.cancelDeleteComment = () => {\n      this.setState({\n        ShowDeleteWarning: false,\n        CommentToDelete: null\n      });\n    };\n    this.DeleteCommentButton = async id => {\n      await this.DeleteComment(id);\n      if (this.props.onUpdate) {\n        this.props.onUpdate();\n      }\n    };\n  }\n  render() {\n    const {\n      comment,\n      id\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: comment.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u0410\\u0432\\u0442\\u043E\\u0440: \", comment.login]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), comment.login === this.context.Login && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.showDeleteWarning(id),\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this), this.state.ShowDeleteWarning && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"background\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"warning m-plus-rounded-1c-regular\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.confirmDeleteComment,\n            style: {\n              marginRight: '10px'\n            },\n            children: \"\\u0414\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.cancelDeleteComment,\n            children: \"\\u041D\\u0435\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this);\n  }\n}\nComment.contextType = AppContext;\nexport class Comments extends Component {\n  render() {\n    const {\n      data\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list\",\n        children: data.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n          comment: comment,\n          id: comment.comment_id,\n          onUpdate: this.props.onUpdate\n        }, comment.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["Component","AppContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Comment","constructor","args","state","Error","ShowDeleteWarning","CommentToDelete","DeleteComment","id","response","fetch","method","headers","context","UserToken","result","json","error","setState","console","log","showDeleteWarning","confirmDeleteComment","props","onUpdate","cancelDeleteComment","DeleteCommentButton","render","comment","className","children","content","fileName","_jsxFileName","lineNumber","columnNumber","login","Login","onClick","style","marginRight","contextType","Comments","data","map","comment_id"],"sources":["/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Comments.jsx"],"sourcesContent":["import { Component } from \"react\";\nimport { AppContext } from \"../App/Context\";\nimport {} from \"./Comments.css\"\n\nexport class Comment extends Component {\n    static contextType = AppContext\n    state = {\n        Error: \"\",\n        ShowDeleteWarning: false,\n        CommentToDelete: null\n    }\n    \n\n    DeleteComment = async (id) => {\n        try {\n            const response = await fetch(`http://localhost:9091/deleteCommentById?comment_id=${id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type' : 'application/json',\n                    'Authorization' : `Bearer ${this.context.UserToken}`\n                }\n            })\n            const result = await response.json()\n            if (result.error !== \"\") {\n                this.setState({Error : result.error})\n            } else {\n                this.setState({\n                })\n            }\n            console.log(\"Ответ от API: \", result)\n        }\n        catch(error) {\n            console.error(\"Ошибка: \", error)\n        }\n    }\n\n    showDeleteWarning = (id) => {\n        this.setState({\n            ShowDeleteWarning: true,\n            CommentToDelete: id\n        })\n    }\n\n    confirmDeleteComment = async () => {\n        const { CommentToDelete } = this.state\n        await this.DeleteComment(CommentToDelete)\n        this.setState({ ShowDeleteWarning: false, CommentToDelete: null })\n\n        if (this.props.onUpdate) {\n            this.props.onUpdate()\n        }\n    }\n\n    cancelDeleteComment = () => {\n        this.setState({\n            ShowDeleteWarning: false,\n            CommentToDelete: null\n        })\n    }\n\n    DeleteCommentButton = async (id) => {\n        await this.DeleteComment(id)\n        if (this.props.onUpdate) {\n            this.props.onUpdate()\n        }\n    }\n\n    render() {\n        const {comment, id} = this.props\n        return(\n            <div className=\"comment\">\n                <p>{comment.content}</p>\n                <p>Автор: {comment.login}</p>\n                {comment.login === this.context.Login &&\n                    <button onClick={() => this.showDeleteWarning(id)}>\n                        Удалить комментарий\n                    </button>\n                }\n                {this.state.ShowDeleteWarning && (\n                    <div className=\"background\">\n                        <div className=\"warning m-plus-rounded-1c-regular\">\n                            <p>Вы уверены, что хотите удалить комментарий?</p>\n                            <button \n                                onClick={this.confirmDeleteComment} \n                                style={{ marginRight: '10px' }}>\n                                Да\n                            </button>\n                            <button onClick={this.cancelDeleteComment}>\n                                Нет\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nexport class Comments extends Component {\n    render() {\n        const {data} = this.props\n        return(\n            <>\n                <p>Комментарии:</p>\n                <div className=\"list\">\n                {data.map((comment) => (\n                    <Comment \n                        key={comment.id} \n                        comment={comment} \n                        id={comment.comment_id}\n                        onUpdate={this.props.onUpdate}\n                    />\n                ))}\n                </div> \n            </>\n        )\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}