{"ast":null,"code":"var _jsxFileName = \"/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Comments.jsx\";\nimport { Component } from \"react\";\nimport { AppContext } from \"../App/Context\";\nimport \"./Comments.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class Comment extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Error: \"\",\n      ShowDeleteWarning: false,\n      // Для показа предупреждения\n      CommentToDelete: null // Для хранения ID комментария\n    };\n    this.DeleteComment = async id => {\n      try {\n        const response = await fetch(`http://localhost:9091/deleteCommentById?comment_id=${id}`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${this.context.UserToken}`\n          }\n        });\n        const result = await response.json();\n        if (result.error !== \"\") {\n          this.setState({\n            Error: result.error\n          });\n        } else {\n          this.setState({});\n        }\n        console.log(\"Ответ от API: \", result);\n      } catch (error) {\n        console.error(\"Ошибка: \", error);\n      }\n    };\n    this.DeleteCommentButton = async id => {\n      await this.DeleteComment(id);\n      if (this.props.onUpdate) {\n        this.props.onUpdate(); // Обновление комментариев\n      }\n    };\n  }\n  render() {\n    const {\n      comment,\n      id\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: comment.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u0410\\u0432\\u0442\\u043E\\u0440: \", comment.login]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), comment.login === this.context.Login && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          this.DeleteCommentButton(id);\n        },\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this);\n  }\n}\nComment.contextType = AppContext;\nexport class Comments extends Component {\n  render() {\n    const {\n      data\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list\",\n        children: data.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n          comment: comment,\n          id: comment.comment_id,\n          onUpdate: this.props.onUpdate\n        }, comment.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["Component","AppContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Comment","constructor","args","state","Error","ShowDeleteWarning","CommentToDelete","DeleteComment","id","response","fetch","method","headers","context","UserToken","result","json","error","setState","console","log","DeleteCommentButton","props","onUpdate","render","comment","className","children","content","fileName","_jsxFileName","lineNumber","columnNumber","login","Login","onClick","contextType","Comments","data","map","comment_id"],"sources":["/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Comments.jsx"],"sourcesContent":["import { Component } from \"react\";\nimport { AppContext } from \"../App/Context\";\nimport {} from \"./Comments.css\"\n\nexport class Comment extends Component {\n    static contextType = AppContext\n    state = {\n        Error: \"\",\n        ShowDeleteWarning: false,  // Для показа предупреждения\n        CommentToDelete: null      // Для хранения ID комментария\n    }\n    \n\n    DeleteComment = async (id) => {\n        try {\n            const response = await fetch(`http://localhost:9091/deleteCommentById?comment_id=${id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type' : 'application/json',\n                    'Authorization' : `Bearer ${this.context.UserToken}`\n                }\n            })\n            const result = await response.json()\n            if (result.error !== \"\") {\n                this.setState({Error : result.error})\n            } else {\n                this.setState({\n                })\n            }\n            console.log(\"Ответ от API: \", result)\n        }\n        catch(error) {\n            console.error(\"Ошибка: \", error)\n        }\n    }\n\n    DeleteCommentButton = async (id) => {\n        await this.DeleteComment(id);\n        if (this.props.onUpdate) {\n            this.props.onUpdate();  // Обновление комментариев\n        }\n    }\n\n    render() {\n        const {comment, id} = this.props\n        return(\n            <div className=\"comment\">\n                <p>{comment.content}</p>\n                <p>Автор: {comment.login}</p>\n                {comment.login === this.context.Login && \n                    <button onClick={() => {this.DeleteCommentButton(id)}}>\n                        Удалить комментарий\n                    </button>\n                }\n            </div>\n        )\n    }\n}\n\nexport class Comments extends Component {\n    render() {\n        const {data} = this.props\n        return(\n            <>\n                <p>Комментарии:</p>\n                <div className=\"list\">\n                {data.map((comment) => (\n                    <Comment \n                        key={comment.id} \n                        comment={comment} \n                        id={comment.comment_id}\n                        onUpdate={this.props.onUpdate}\n                    />\n                ))}\n                </div> \n            </>\n        )\n    }\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,UAAU,QAAQ,gBAAgB;AAC3C,OAAe,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/B,OAAO,MAAMC,OAAO,SAASN,SAAS,CAAC;EAAAO,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KAEnCC,KAAK,GAAG;MACJC,KAAK,EAAE,EAAE;MACTC,iBAAiB,EAAE,KAAK;MAAG;MAC3BC,eAAe,EAAE,IAAI,CAAM;IAC/B,CAAC;IAAA,KAGDC,aAAa,GAAG,MAAOC,EAAE,IAAK;MAC1B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sDAAsDF,EAAE,EAAE,EAAE;UACrFG,MAAM,EAAE,QAAQ;UAChBC,OAAO,EAAE;YACL,cAAc,EAAG,kBAAkB;YACnC,eAAe,EAAG,UAAU,IAAI,CAACC,OAAO,CAACC,SAAS;UACtD;QACJ,CAAC,CAAC;QACF,MAAMC,MAAM,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QACpC,IAAID,MAAM,CAACE,KAAK,KAAK,EAAE,EAAE;UACrB,IAAI,CAACC,QAAQ,CAAC;YAACd,KAAK,EAAGW,MAAM,CAACE;UAAK,CAAC,CAAC;QACzC,CAAC,MAAM;UACH,IAAI,CAACC,QAAQ,CAAC,CACd,CAAC,CAAC;QACN;QACAC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEL,MAAM,CAAC;MACzC,CAAC,CACD,OAAME,KAAK,EAAE;QACTE,OAAO,CAACF,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;MACpC;IACJ,CAAC;IAAA,KAEDI,mBAAmB,GAAG,MAAOb,EAAE,IAAK;MAChC,MAAM,IAAI,CAACD,aAAa,CAACC,EAAE,CAAC;MAC5B,IAAI,IAAI,CAACc,KAAK,CAACC,QAAQ,EAAE;QACrB,IAAI,CAACD,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAE;MAC5B;IACJ,CAAC;EAAA;EAEDC,MAAMA,CAAA,EAAG;IACL,MAAM;MAACC,OAAO;MAAEjB;IAAE,CAAC,GAAG,IAAI,CAACc,KAAK;IAChC,oBACIzB,OAAA;MAAK6B,SAAS,EAAC,SAAS;MAAAC,QAAA,gBACpB9B,OAAA;QAAA8B,QAAA,EAAIF,OAAO,CAACG;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxBnC,OAAA;QAAA8B,QAAA,GAAG,kCAAO,EAACF,OAAO,CAACQ,KAAK;MAAA;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAC5BP,OAAO,CAACQ,KAAK,KAAK,IAAI,CAACpB,OAAO,CAACqB,KAAK,iBACjCrC,OAAA;QAAQsC,OAAO,EAAEA,CAAA,KAAM;UAAC,IAAI,CAACd,mBAAmB,CAACb,EAAE,CAAC;QAAA,CAAE;QAAAmB,QAAA,EAAC;MAEvD;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEZ,CAAC;EAEd;AACJ;AArDahC,OAAO,CACToC,WAAW,GAAGzC,UAAU;AAsDnC,OAAO,MAAM0C,QAAQ,SAAS3C,SAAS,CAAC;EACpC8B,MAAMA,CAAA,EAAG;IACL,MAAM;MAACc;IAAI,CAAC,GAAG,IAAI,CAAChB,KAAK;IACzB,oBACIzB,OAAA,CAAAE,SAAA;MAAA4B,QAAA,gBACI9B,OAAA;QAAA8B,QAAA,EAAG;MAAY;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACnBnC,OAAA;QAAK6B,SAAS,EAAC,MAAM;QAAAC,QAAA,EACpBW,IAAI,CAACC,GAAG,CAAEd,OAAO,iBACd5B,OAAA,CAACG,OAAO;UAEJyB,OAAO,EAAEA,OAAQ;UACjBjB,EAAE,EAAEiB,OAAO,CAACe,UAAW;UACvBjB,QAAQ,EAAE,IAAI,CAACD,KAAK,CAACC;QAAS,GAHzBE,OAAO,CAACjB,EAAE;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAIlB,CACJ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC;IAAA,eACR,CAAC;EAEX;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}