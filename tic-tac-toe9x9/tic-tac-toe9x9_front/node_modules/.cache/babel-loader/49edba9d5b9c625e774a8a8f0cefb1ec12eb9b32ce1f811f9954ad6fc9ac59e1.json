{"ast":null,"code":"var _jsxFileName = \"/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Comments.jsx\";\nimport { Component } from \"react\";\nimport { AppContext } from \"../App/Context\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class Comment extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Error: \"\"\n    };\n    this.DeleteComment = async id => {\n      try {\n        const response = await fetch(`http://localhost:9091/deleteCommentById?comment_id=${id}`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${this.context.UserToken}`\n          }\n        });\n        const result = await response.json();\n        if (result.error !== \"\") {\n          this.setState({\n            Error: result.error\n          });\n        } else {\n          this.setState({});\n        }\n        console.log(\"Ответ от API: \", result);\n      } catch (error) {\n        console.error(\"Ошибка: \", error);\n      }\n    };\n    this.DeleteCommentButton = id => {\n      console.log(\"ID комментария\" + id);\n      this.DeleteComment(id);\n    };\n  }\n  render() {\n    const {\n      comment\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: comment.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u0410\\u0432\\u0442\\u043E\\u0440: \", comment.login]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), comment.login === this.context.Login && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          this.DeleteCommentButton(comment.id);\n        },\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true);\n  }\n}\nComment.contextType = AppContext;\nexport class Comments extends Component {\n  render() {\n    const {\n      data\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list\",\n        children: data.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n          comment: comment\n        }, comment.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["Component","AppContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Comment","constructor","args","state","Error","DeleteComment","id","response","fetch","method","headers","context","UserToken","result","json","error","setState","console","log","DeleteCommentButton","render","comment","props","children","content","fileName","_jsxFileName","lineNumber","columnNumber","login","Login","onClick","contextType","Comments","data","className","map"],"sources":["/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Comments.jsx"],"sourcesContent":["import { Component } from \"react\";\nimport { AppContext } from \"../App/Context\";\n\nexport class Comment extends Component {\n    static contextType = AppContext\n    state = {\n        Error: \"\"\n    }\n\n    DeleteComment = async (id) => {\n        try {\n            const response = await fetch(`http://localhost:9091/deleteCommentById?comment_id=${id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type' : 'application/json',\n                    'Authorization' : `Bearer ${this.context.UserToken}`\n                }\n            })\n            const result = await response.json()\n            if (result.error !== \"\") {\n                this.setState({Error : result.error})\n            } else {\n                this.setState({\n                })\n            }\n            console.log(\"Ответ от API: \", result)\n        }\n        catch(error) {\n            console.error(\"Ошибка: \", error)\n        }\n    }\n\n    DeleteCommentButton = (id) => {\n        console.log(\"ID комментария\" + id)\n        this.DeleteComment(id)\n    }\n\n    render() {\n        const {comment} = this.props\n        return(\n            <>\n                <p>{comment.content}</p>\n                <p>Автор: {comment.login}</p>\n                {comment.login === this.context.Login && \n                    <button onClick={() => {this.DeleteCommentButton(comment.id)}}>\n                        Удалить комментарий\n                    </button>\n                }\n            </>\n        )\n    }\n}\n\nexport class Comments extends Component {\n    render() {\n        const {data} = this.props\n        return(\n            <>\n                <p>Комментарии:</p>\n                <div className=\"list\">\n                {data.map((comment) => (\n                    <Comment key={comment.id} comment={comment} />\n                ))}\n                </div> \n            </>\n        )\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}