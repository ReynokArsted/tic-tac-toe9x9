{"ast":null,"code":"var _jsxFileName = \"/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Forum.jsx\";\nimport { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n//import { AppContext } from \"../Context\";\nimport { Topics } from \"./Topics\";\n//import { da } from \"date-fns/locale\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class Forum extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Posts: [],\n      Total: 0,\n      PageSize: 0,\n      Page: 1,\n      Loading: false,\n      Error: \"\"\n    };\n    this.fetchData = async () => {\n      const {\n        Page\n      } = this.state;\n      try {\n        const response = await fetch(`http://localhost:9091/getPosts?page=${Page}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        /*            \n        // Проверяем статус ответа\n        if (!response.ok) {\n            console.error(`HTTP Error: ${response.status}`);\n            const errorText = await response.text();\n            console.error(\"Raw error response:\", errorText);\n            this.setState({ Error: `Ошибка: ${response.statusText}` });\n            return;\n        }\n        \n        // Логируем текст ответа до парсинга\n        const text = await response.text();\n        console.log(\"Raw response:\", text);\n        \n        // Парсим JSON\n        const result1 = JSON.parse(text);\n        */\n        const result = await response.json();\n        if (result.error !== \"\") {\n          this.setState({\n            Error: result.error\n          });\n        } else {\n          this.setState({\n            Posts: result.posts,\n            Total: result.total,\n            PageSize: result.page_size,\n            Page: result.page,\n            Error: \"\"\n          });\n        }\n        console.log(\"Ответ от API:\", result);\n      } catch (error) {\n        console.error(\"Ошибка:\", error);\n      }\n    };\n  }\n  componentDidMount() {\n    this.fetchData();\n  }\n  render() {\n    const {\n      Posts,\n      Loading,\n      Error\n    } = this.state;\n    if (Loading) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 20\n      }, this);\n    }\n    if (Error) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", Error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 20\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0422\\u0435\\u043C\\u044B \\u0434\\u043B\\u044F \\u043E\\u0431\\u0441\\u0443\\u0436\\u0434\\u0435\\u043D\\u0438\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/new_topic\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0435 \\u043E\\u0431\\u0441\\u0443\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/edit_topic\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E\\u0431\\u0441\\u0443\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list\",\n        children: /*#__PURE__*/_jsxDEV(Topics, {\n          data: Posts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["Component","Link","Topics","jsxDEV","_jsxDEV","Fragment","_Fragment","Forum","constructor","args","state","Posts","Total","PageSize","Page","Loading","Error","fetchData","response","fetch","method","headers","result","json","error","setState","posts","total","page_size","page","console","log","componentDidMount","render","children","fileName","_jsxFileName","lineNumber","columnNumber","to","className","data"],"sources":["/home/RA/projects/tic-tac-toe9x9_project/tic-tac-toe9x9/tic-tac-toe9x9_front/src/Forum/Forum.jsx"],"sourcesContent":["import { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n//import { AppContext } from \"../Context\";\nimport { Topics } from \"./Topics\";\n//import { da } from \"date-fns/locale\";\n\nexport class Forum extends Component {\n    state = {\n        Posts: [],\n        Total: 0,\n        PageSize: 0,\n        Page: 1,\n        Loading: false,\n        Error: \"\"\n    }\n\n    fetchData = async () => {\n        const {Page} = this.state\n        try {\n            const response = await fetch(`http://localhost:9091/getPosts?page=${Page}`, {\n                method: 'GET', \n                headers: {\n                    'Content-Type': 'application/json', \n                },\n            })\n/*            \n// Проверяем статус ответа\nif (!response.ok) {\n    console.error(`HTTP Error: ${response.status}`);\n    const errorText = await response.text();\n    console.error(\"Raw error response:\", errorText);\n    this.setState({ Error: `Ошибка: ${response.statusText}` });\n    return;\n}\n\n// Логируем текст ответа до парсинга\nconst text = await response.text();\nconsole.log(\"Raw response:\", text);\n\n// Парсим JSON\nconst result1 = JSON.parse(text);\n*/\n            const result = await response.json()\n            if (result.error !== \"\") {\n                this.setState({Error : result.error})\n            } else {\n                this.setState({\n                    Posts: result.posts,\n                    Total: result.total,\n                    PageSize: result.page_size,\n                    Page: result.page,\n                    Error: \"\"\n                })\n            }\n            console.log(\"Ответ от API:\", result);\n\n            } catch (error) {\n                console.error(\"Ошибка:\", error);\n            }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    render() {\n        const {Posts, Loading, Error} = this.state;\n\n        if (Loading) {\n            return <p>Загрузка...</p>;\n        }\n\n        if (Error) {\n            return <p>Ошибка: {Error}</p>;\n        }\n\n        return (\n            <>\n                <h1>Темы для обсуждений</h1>\n                <Link to=\"/new_topic\"><button>Создать новое обсуждение</button></Link>\n                <Link to=\"/edit_topic\"><button>Редактировать созданные обсуждения</button></Link>\n                <div className=\"list\">\n                <Topics data={Posts}/>\n                </div>\n            </>\n        );\n        \n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}